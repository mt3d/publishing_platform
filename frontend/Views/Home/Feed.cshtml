@using frontend.Models
@model FeedViewModel

<partial name="_NavbarPartial" />

<main class="container mt-4">
    <div class="row">
        <!-- MAIN FEED -->
        <div class="col-lg-8">

            <!-- Feed controls -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div>
                    <button class="btn btn-sm btn-outline-secondary active">For you</button>
                    <button class="btn btn-sm btn-outline-secondary ms-1">Featured</button>
                </div>
                <div class="small-muted">Top stories · Updated</div>
            </div>

            @foreach (Article article in Model.Articles)
            {
@*              <article class="card mb-3 article-card">
                    <div class="card-body p-3">
                        <div class="d-flex align-items-start">
                            @* <img src="@article.Image" class="rounded-circle me-3" alt="author">
                            <div class="flex-grow-1">
                                <div class="article-meta">By <strong>Jane Doe</strong> · Jul 15 · <span class="small-muted">6 min read</span></div>
                                <h5 class="mt-2">How to build thoughtful products without burning out</h5>
                                <p class="mb-1 small-muted">A short intro sentence that previews the article content and invites the reader to continue.</p>
                                <div class="mt-2">
                                    <span class="tag">Design</span>
                                    <span class="tag">Product</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </article> *@

                <article class="card border-0 shadow-sm mb-4 article-card">
                    <div class="card-body">

                        <!-- Publication + Author -->
                        <div class="d-flex align-items-center mb-2 text-muted small">
                            @if (article.Publication != null && article.Author != null)
                            {
                                <a href="@article.Publication.Url" class="d-flex align-items-center me-2 text-decoration-none text-muted">
                                    <img src="@article.Publication.Image" alt="@article.Publication.Name" class="rounded-circle me-1" width="24" height="24">
                                    <span class="fw-semibold">@article.Publication.Name</span>
                                </a>
                                <span>· by <a href="/@article.Author.Url" class="text-decoration-none">@article.Author.FullName</a></span>
                            }
                        </div>

                        <!-- Title + Description -->
                        <a href="@article.Slug" class="text-decoration-none text-dark d-flex">
                            <div class="flex-grow-1">
                                <h5 class="fw-bold mb-1">@article.Title</h5>
                                <p class="text-muted mb-2">@article.Description</p>
                                <div class="d-flex align-items-center small text-muted">
                                    <span>@article.UpdatedAt.ToString("MMM d, yyyy")</span>
                                    <span class="ms-3"><i class="bi bi-hand-thumbs-up"></i> @article.ClapsCount</span>
                                    <span class="ms-3"><i class="bi bi-chat"></i> @article.CommentsCount</span>
                                </div>
                            </div>
                            @if (!string.IsNullOrEmpty(article.Image))
                            {
                                <img src="@article.Image" alt="@article.Title" class="ms-3 rounded" width="120" height="80">
                            }
                        </a>
                    </div>
                </article>
            }

            <div page-model="@Model.PagingInfo" page-action="Feed"></div>

            <!-- Load more -->
@*             <div class="text-center my-4">
                <button class="btn btn-outline-secondary">Show more stories</button>
            </div> *@

        </div>

        <!-- SIDEBAR -->
        <aside class="col-lg-4">
            <div class="card p-3 mb-3 sidebar-card">
                <h6 class="mb-2">Staff Picks</h6>
                <ol class="ps-3 mb-0">
                    <li class="mb-2 small-muted">Why you should write every day</li>
                    <li class="mb-2 small-muted">The future of remote work</li>
                    <li class="mb-2 small-muted">A short guide to investing</li>
                </ol>
            </div>

            <div class="card p-3 mb-3 sidebar-card">
                <h6 class="mb-2">Recomended topics</h6>
                <div class="d-flex flex-wrap">
                    <button class="btn btn-sm btn-light m-1">Tech</button>
                    <button class="btn btn-sm btn-light m-1">Productivity</button>
                    <button class="btn btn-sm btn-light m-1">Design</button>
                    <button class="btn btn-sm btn-light m-1">Business</button>
                    <button class="btn btn-sm btn-light m-1">Self</button>
                </div>
            </div>

            <div class="card p-3 mb-3 sidebar-card">
                <h6 class="mb-2">Who to Follow</h6>
            </div>

            <div class="card p-3 sidebar-card small-muted">
                <h6>Reading List</h6>
                <p class="mb-2">Click the <span></span> on any story to easily add it to your reading list or a custom list that you can share.</p>
            </div>

        </aside>
    </div>

    <partial name="_FooterPartial" />
</main>